<?xml version="1.0" encoding="utf-8" ?>
<diff xmlns:xsi="http://www.w3.org/2001/xmlschema-instance">
  <!-- 
  Using XML patch "Add" here to stick this extra check just before the check for what was unlocked. In this way I can add my own items to the unlocked array based on the 
  same params as Egosoft. Yes, it adds a second if/else block, but this means this mod will be compatible with anything that doesn't mess with the check for $Unlocked. 
  -->
  <add sel="/mdscript/cues/cue[@name='Start']/cues/cue[@name='Research_Completed']/actions/do_if[@value='$Unlocked']" pos="before">
	<do_if value="event.param2 == ware.research_mod_engine_mk3">
		<debug_text text="Scuffle Mod received message for Mk3 Engine Research_Completed" />
		<append_to_list name="$Unlocked" exact="[ware.mod_engine_scufflekerfuffle]" />
	</do_if>
	<do_elseif value="event.param2 == ware.research_mod_shield_mk3">
		<debug_text text="Scuffle Mod received message for Mk3 Shield Research_Completed" />
		<append_to_list name="$Unlocked" exact="[ware.mod_shield_scufflekerfuffle]" />
	</do_elseif>
	<do_elseif value="event.param2 == ware.research_mod_weapon_mk3">
		<debug_text text="Scuffle Mod received message for Mk3 Weapon Research_Completed" />
		<append_to_list name="$Unlocked" exact="[ware.mod_weapon_scufflekerfuffle_surfaceelement, ware.mod_weapon_scufflekerfuffle_mining, ware.mod_weapon_scufflekerfuffle_damage]" />
	</do_elseif>
	<do_elseif value="event.param2 == ware.research_mod_ship_mk3">
		<debug_text text="Scuffle Mod received message for Mk3 Ship Research_Completed" />
		<append_to_list name="$Unlocked" exact="[ware.mod_ship_scufflekerfuffle]" />
	</do_elseif>
  </add>
</diff>